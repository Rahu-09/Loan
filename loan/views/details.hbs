<!DOCTYPE html>
<html>

<head>
    <title>{{title}}</title>
    <link rel='stylesheet' href='/stylesheets/style.css' />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="/stylesheets/style.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
        integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">

    <!-- jQuery and JS bundle w/ Popper.js -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
        integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx"
        crossorigin="anonymous"></script>
    <script>
        function aCard() {
            var x = document.forms["AdharCard"]["AdharCard"].value;
            if (x == "" || x == null) {
                alert("Upload AdharCard");
                return false;
            }
        }
    </script>
    <script>
        function pCard() {
            var x = document.forms["PanCard"]["PanCard"].value;
            if (x == "" || x == null) {
                alert("Upload PanCard");
                return false;
            }
        }
    </script>
    <script>
        function bCheque() {
            var x = document.forms["PanCard"]["PanCard"].value;
            if (x == "" || x == null) {
                alert("Upload BlankCheque");
                return false;
            }
        }
    </script>
    {{!-- <script>
        function incrementValue() {
            var value = parseInt(document.getElementById('number').value, 10);
            value = isNaN(value) ? 0 : value;
            value++;
            document.getElementById('number').value = value;
        }
    </script> --}}
    <script>
        var a = [];
        function add() {
            var new_html = [];
            var intr = document.getElementById('int').value;
            var p = intr.split(",");
            let m = `<div class="row justify-content-center"> <input type="text" id="rate_` + a.length + `" value="0" style="text-align: center; margin-left: 10px; margin-right: 10px;"> </div>`;
            for (let i = 0; i < a.length; i++) {
                new_html.push(`<div class="row justify-content-center"> <input type="text" id="rate_` + i + `" value="` + document.getElementById('rate_' + i).value + `" style="text-align: center; margin-left: 10px; margin-right: 10px;"> </div>`)
            }
            a = new_html;
            a.push(m);
            console.log(a);
            document.getElementById("myId").innerHTML = a;
            document.getElementById("inc").innerHTML = `<input type="button" onclick="add()" value="+">
        <input type="button" onclick="Subtract()" value="-">`;
            return;
        }
        function Subtract() {
            a.pop();
            console.log(a);
            document.getElementById("myId").innerHTML = a;
            if (a.length == 1) {
                document.getElementById("inc").innerHTML = `<input type="button" onclick="add()" value="+">`;
            }
            return;
        }
        function sub() {
            var intr = document.getElementById('int').value;
            var p = intr.split(",");
            var b = [];
            for (let i = 0; i < p.length; i++) 
            {
                b.push(p[i])
            }
            for (let i = 0; i < a.length; i++) {
                b.push(document.getElementById('rate_' + i).value);
            }
            console.log(b);
            var id = document.getElementById('id').value;
            var displayArea = document.getElementById("displayArea");
            displayArea.innerHTML = `<input type="hidden" name="uname" value="` + b + `" style="text-align: center; margin-left: 10px; margin-right: 10px;">`;
            console.log(displayArea)
            var xhttp = new XMLHttpRequest();
            xhttp.onreadystatechange = function () {
                if (this.readyState == 4) {
                }
            }
            xhttp.open("POST", `http://localhost:3000/${id}/interest`, true);
            xhttp.setRequestHeader("Content-Type", "application/json");
            var data = { interest: b };
            xhttp.send(JSON.stringify(data));
        }
    </script>
</head>

<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark ">
        <a class="navbar-brand" href="#">Personal Loan</a>
        <div class="collapse navbar-collapse" id="navbarText">
            <ul class="navbar-nav mr-auto">
                <li class="active nav-item"><a class="nav-link" href="/">Home</a></li>
                <li class="active nav-item"><a class="nav-link" href="/admin">Customer Details</a></li>
                <li class="dropdown nav-item">
                    <a class="dropdown-toggle nav-link" data-toggle="dropdown" href="#">Loan
                        <span class="caret"></span></a>
                    <ul class="dropdown-menu">
                        <li><a href="/homeLoan" class="dropdown-item">Home Loan</a></li>
                        <li><a href="/personalLoan" class="dropdown-item">Personal Loan</a></li>
                        <li><a href="/LAP" class="dropdown-item">LAP</a></li>
                        <li><a href="/bussinessLoan" class="dropdown-item">Bussiness Loan</a></li>
                    </ul>
                </li>
                <a class="nav-link" data-toggle="modal" data-target="#About">About</a>
                <a class="nav-link" data-toggle="modal" data-target="#Help">Help</a>
                <div id="About" class="modal fade" role="dialog">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal">&times;</button>
                                <h4 class="modal-title">About us</h4>
                            </div>
                            <div class="modal-body">
                                <p>We are providing loan solution in PAN India and we are guiding and helping people to
                                    fulfill their need of finance .Whether you are businesses , individual , employee we
                                    have the all type of financial solution for you .We have easy loan solution for you
                                    and we have easy loan facility of all your needs.</p>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                            </div>
                        </div>
                    </div>
                </div>
                <li class="nav-item"><a class="nav-link" href='/logout'>Logout</a></li>
                <div id="Help" class="modal fade" role="dialog">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal">&times;</button>
                                <h4 class="modal-title">Help</h4>
                            </div>
                            <div class="modal-body">
                                <p>Contact Number: 7365801710</p>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                            </div>
                        </div>
                    </div>
                </div>
            </ul>
        </div>
        <div class="navbar-header" style="float: right;"><a class="navbar-brand nav-link" href="#">Loggedin as
                {{login}}</a></div>
    </nav>
    <div class="row justify-content-center">
        <div class="col-lg-9">
            <div id="searchresults">
                <table class="table table-striped border-radius shadow--sm table-responsive">
                    <thead class="table__header border-top-radius">
                        <tr>
                            <th scope="col"> Customer Name </th>
                            <th scope="col"> Mobile Number </th>
                            <th scope="col"> Current Location </th>
                            <th scope="col"> Loan Amount Required </th>
                            <th scope="col"> Current Residence </th>
                            <th scope="col"> Employment Type </th>
                            <th scope="col"> Company Name </th>
                            <th scope="col"> Monthly Income </th>
                            <th scope="col"> Mode of Salary </th>
                        </tr>
                    </thead>
                    <tbody id="recordbody">
                        {{#each records}}
                        <tr>
                            <th scope="row" class="break-words">
                                <strong>
                                    <p>{{this.contactName}}</p>
                                </strong>
                            </th>
                            <th scope="row" class="break-words">
                                <strong>
                                    <p>{{this.mobileNumber}}</p>
                                </strong>
                            </th>
                            <th scope="row" class="break-words">
                                <strong>
                                    <p>{{this.currentLocation}}</p>
                                </strong>
                            </th>
                            <th scope="row" class="break-words">
                                <strong>
                                    <p>{{this.loanAmount}}</p>
                                </strong>
                            </th>
                            <th scope="row" class="break-words">
                                <strong>
                                    <p>{{this.residenceType}}</p>
                                </strong>
                            </th>
                            <th scope="row" class="break-words">
                                <strong>
                                    <p>{{this.eType}}</p>
                                </strong>
                            </th>
                            <th scope="row" class="break-words">
                                <strong>
                                    <p>{{this.companyName}}</p>
                                </strong>
                            </th>
                            <th scope="row" class="break-words">
                                <strong>
                                    <p>{{this.monthlyIncome}}</p>
                                </strong>
                            </th>
                            <th scope="row" class="break-words">
                                <strong>
                                    <p>{{this.modeofSalary}}</p>
                                </strong>
                            </th>
                        </tr>
                        {{/each}}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <div class="row justify-content-center">
        {{#each records}}

        {{#noop this.adharCard}}
        <div>
            <img src="http://localhost:3000/images/{{this.adharCard}}" height="181" width="279"
                style="display:block; border: 5px solid rgb(235, 15, 15);" />
            <br>
        </div>
        {{else}}
        <form method="post" name="AdharCard" id="adharCard" action="/details/adharCard/{{this._id}}"
            onsubmit="return aCard()" enctype="multipart/form-data" novalidate="" class="box has-advanced-upload"
            required>
            <div class="box__input">
                <svg class="box__icon" xmlns="https://www.w3.org/2000/svg" width="50" height="43" viewBox="0 0 50 43">
                    <path
                        d="M48.4 26.5c-.9 0-1.7.7-1.7 1.7v11.6h-43.3v-11.6c0-.9-.7-1.7-1.7-1.7s-1.7.7-1.7 1.7v13.2c0 .9.7 1.7 1.7 1.7h46.7c.9 0 1.7-.7 1.7-1.7v-13.2c0-1-.7-1.7-1.7-1.7zm-24.5 6.1c.3.3.8.5 1.2.5.4 0 .9-.2 1.2-.5l10-11.6c.7-.7.7-1.7 0-2.4s-1.7-.7-2.4 0l-7.1 8.3v-25.3c0-.9-.7-1.7-1.7-1.7s-1.7.7-1.7 1.7v25.3l-7.1-8.3c-.7-.7-1.7-.7-2.4 0s-.7 1.7 0 2.4l10 11.6z">
                    </path>
                </svg>
                <input class="box__file" type="file" name="AdharCard" value="">
                <label for="FiletoUpload"><strong class="btn_upload">Upload AdharCard</strong></label>
            </div>
            <br>
            <button type="submit" class="box__button">Upload</button>
        </form>
        {{/noop}}
    </div>
    <div class="row justify-content-center">
        {{#noop this.panCard}}
        <div>
            <img src="http://localhost:3000/images/{{this.panCard}}" height="181" width="279"
                style="display:block; border: 5px solid rgb(235, 15, 15);" />
            <br>
        </div>
        {{else}}
        <form method="post" name="PanCard" id="panCard" action="/details/panCard/{{this._id}}" onsubmit="return pCard()"
            enctype="multipart/form-data" novalidate="" class="box has-advanced-upload" required>
            <div class="box__input">
                <svg class="box__icon" xmlns="https://www.w3.org/2000/svg" width="50" height="43" viewBox="0 0 50 43">
                    <path
                        d="M48.4 26.5c-.9 0-1.7.7-1.7 1.7v11.6h-43.3v-11.6c0-.9-.7-1.7-1.7-1.7s-1.7.7-1.7 1.7v13.2c0 .9.7 1.7 1.7 1.7h46.7c.9 0 1.7-.7 1.7-1.7v-13.2c0-1-.7-1.7-1.7-1.7zm-24.5 6.1c.3.3.8.5 1.2.5.4 0 .9-.2 1.2-.5l10-11.6c.7-.7.7-1.7 0-2.4s-1.7-.7-2.4 0l-7.1 8.3v-25.3c0-.9-.7-1.7-1.7-1.7s-1.7.7-1.7 1.7v25.3l-7.1-8.3c-.7-.7-1.7-.7-2.4 0s-.7 1.7 0 2.4l10 11.6z">
                    </path>
                </svg>
                <input class="box__file" type="file" name="PanCard" value="">
                <label for="FiletoUpload"><strong class="btn_upload">Upload PanCard</strong></label>
            </div>
            <br>
            <button type="submit" class="box__button">Upload</button>
        </form>
        {{/noop}}
    </div>
    <div class="row justify-content-center">
        {{#noop this.blankCheque}}
        <div>
            <img src="http://localhost:3000/images/{{this.blankCheque}}" height="181" width="279"
                style="display:block; border: 5px solid rgb(235, 15, 15);" />
        </div>
        {{else}}
        <form method="post" name="BlankCheque" id="blankCheque" action="/details/blankCheque/{{this._id}}"
            onsubmit="return bCheque()" enctype="multipart/form-data" class="box has-advanced-upload" required>
            <div class="box__input">
                <svg class="box__icon" xmlns="https://www.w3.org/2000/svg" width="50" height="43" viewBox="0 0 50 43">
                    <path
                        d="M48.4 26.5c-.9 0-1.7.7-1.7 1.7v11.6h-43.3v-11.6c0-.9-.7-1.7-1.7-1.7s-1.7.7-1.7 1.7v13.2c0 .9.7 1.7 1.7 1.7h46.7c.9 0 1.7-.7 1.7-1.7v-13.2c0-1-.7-1.7-1.7-1.7zm-24.5 6.1c.3.3.8.5 1.2.5.4 0 .9-.2 1.2-.5l10-11.6c.7-.7.7-1.7 0-2.4s-1.7-.7-2.4 0l-7.1 8.3v-25.3c0-.9-.7-1.7-1.7-1.7s-1.7.7-1.7 1.7v25.3l-7.1-8.3c-.7-.7-1.7-.7-2.4 0s-.7 1.7 0 2.4l10 11.6z">
                    </path>
                </svg>
                <input class="box__file" type="file" name="BlankCheque" value="">
                <label for="FiletoUpload"><strong class="btn_upload">Upload BlankCheque</strong></label>
            </div>
            <br>
            <button type="submit" class="box__button">Upload</button>
        </form>
        {{/noop}}
    </div>
    {{/each}}
    {{!-- <form>
        <div class="row justify-content-center">
            <h1>Interest</h1>
            </div>
            <div class="row justify-content-center">
            <input type="text" id="number" value="0"
                style="text-align: center; padding: 12px 20px; box-sizing: border-box;">
            <input type="button" onclick="incrementValue()" value="+">
        </div>
    </form> --}}
    <div class="row justify-content-center">
        <h1>Interest</h1>
    </div>
    <div id="interest">
        {{#each records}}
        {{#each this.interests}}
        <div class="row justify-content-center">
            <input type="text" value="{{this}}" style="text-align: center; margin-left: 10px; margin-right: 10px;">
        </div>
        {{/each}}
        {{/each}}
    </div>
    <div id="myId">
        <div class="row justify-content-center">
            <input type="text" id="rate_0" value="0" style="text-align: center; margin-left: 10px; margin-right: 10px;">
        </div>
    </div>
    <div class="row justify-content-center" id="inc">
        <input type="button" onclick="add()" value="+">
    </div>
    <div class="row justify-content-center" id="submit">
        <br>
        <button type="submit" class="box__button" onclick="sub()">Submit</button>
        <div id="displayArea" />
    </div>
    {{#each records}}
    <input type="hidden" id="id" value="{{this._id}}"
        style="text-align: center; margin-left: 10px; margin-right: 10px;">
    <input type="hidden" id="int" value="{{this.interests}}"
        style="text-align: center; margin-left: 10px; margin-right: 10px;">
    {{/each}}
</body>

</html>